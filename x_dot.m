function x_dot = x_dot(u,x,NLM)

x_dot = zeros(5,1);
x_dot(1) = x(2);
x_dot(2) = (-NLM.J2*(NLM.Ka1*x(2)-NLM.Kf*x(5)+...
    x(4)*(NLM.Lcm2*NLM.Le1*NLM.m2*x(4)+2*NLM.J2*x(2)*cos(x(3)))*sin(x(3)))+...
    NLM.Lcm2*NLM.Le1*NLM.m2*cos(x(3))*(-NLM.Ka2*x(4)+(NLM.g*NLM.Lcm2*NLM.m2+NLM.J2*x(2)^2*cos(x(3)))*sin(x(3))))/...
    (-NLM.Lcm2^2*NLM.Le1^2*NLM.m2^2*cos(x(3))^2+NLM.J2*(NLM.J0+NLM.J2*sin(x(3))^2));
x_dot(3) = x(4);
x_dot(4) = (NLM.J0*NLM.Ka2*x(4)-NLM.g*NLM.Lcm2*NLM.m2*sin(x(3))*(NLM.J0+NLM.J2*sin(x(3))^2)+...
    cos(x(3))*((-NLM.J0*NLM.J2*x(2)^2+NLM.Lcm2^2*NLM.Le1^2*NLM.m2^2*x(4)^2)*sin(x(3))-...
    NLM.J2^2*x(2)^2*sin(x(3))^3+NLM.Lcm2*NLM.Le1*NLM.m2*(NLM.Ka1*x(2)-NLM.Kf*x(5)+NLM.J2*x(2)*x(4)*sin(2*x(3)))))/...
    (NLM.Lcm2^2*NLM.Le1^2*NLM.m2^2*cos(x(3))^2-NLM.J2*(NLM.J0+NLM.J2*sin(x(3))^2));
x_dot(5) = (-NLM.Kt*x(2)-NLM.R*x(5)+u(1))/NLM.Lb;

end